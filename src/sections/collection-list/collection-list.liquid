{{ 'section-collection-list.css' | asset_url | stylesheet_tag }}
<link rel="stylesheet" href="{{ 'component-slider.css' | asset_url }}" media="print" onload="this.media='all'">

<noscript>{{ 'component-slider.css' | asset_url | stylesheet_tag }}</noscript>
{% render 'section-style' with id: section.id, settings: section.settings %}

{{ 'component-card.css' | asset_url | stylesheet_tag }}

<div class="collection-list-wrapper style--{{section.settings.stylecd}} page-width{% if section.settings.swipe_on_mobile == true %} page-width-desktop{% endif %}{% if section.settings.title == blank %} no-heading{% endif %}{% if section.settings.show_view_all == false or section.blocks.size > collections.size %} no-mobile-link{% endif %}">
  <div class="title-wrapper-with-link{% if section.settings.swipe_on_mobile == true %} title-wrapper--self-padded-tablet-down{% else %} title-wrapper--self-padded-mobile{% endif %}{% if section.settings.title == blank %} title-wrapper-with-link--no-heading{% endif %}">
    <div class="common-header">
      {% if section.settings.introduction != blank %}
        <div class="h4 label">{{ section.settings.introduction }}</div>
      {%endif%}
      {% if section.settings.title != blank %}
      <h2 class="collection-list-title heading">{{ section.settings.title | escape }}</h2>
      {% endif %}
      {% if section.settings.subtitle != blank %}
        <div class="h4 label">{{ section.settings.subtitle }}</div>
      {%endif%}
    </div>
    {%- if section.settings.show_view_all and section.settings.swipe_on_mobile -%}
      <a href="{{ routes.collections_url }}" class="link underlined-link ">{{ 'sections.collection_list.view_all' | t }}</a>
    {%- endif -%}
  </div>
  <slider-component class="slider-mobile-gutter">
    <ul class="collection-list grid grid-grid  grid-grid--{{section.settings.grid_size}} {% if section.settings.swipe_on_mobile %} slider slider--tablet grid--peek{% endif %}" data-max="{{section.blocks.size}}"
      id="Slider-{{ section.id }}"
      role="list"
    >
      {%- for block in section.blocks -%}
        <li class="collection-list__item grid__item{% if section.settings.swipe_on_mobile %} slider__slide{% endif %} style--{{section.settings.style | default: 'standard'}}" {{ block.shopify_attributes }}>

        {%- assign collection = collections[block.settings.collection] -%}
        {% if block.type == "featured_collection" %}
          {% if block.settings.image != blank %}
            {% assign image = block.settings.image %}
          {%else %}
            {% assign image = collection.featured_image %}
          {%endif %}
        {% endif %}
          <a{% if block.settings.collection != blank and block.settings.collection.all_products_count > 0 %} href="{{ block.settings.collection.url }}" {% elsif block.settings.url != blank %} href="{{ block.settings.url }}"{% endif %}
            class="card animate-arrow link{% if block.settings.collection.image != blank %} card--media{% else %}{% if section.settings.image_ratio != 'adapt' %} card--stretch{% endif %}{% endif %}{% unless section.settings.image_padding %} card--light-border{% endunless %}"
          >
            <div class="card--stretch card-colored color-{{ section.settings.box_color_scheme }} ">
              {%- if image != blank -%}
                <div class="card__image {% if section.settings.image_padding %} card__media-spacer{% endif %}">
                  {% if section.settings.image_padding %}<div class="overlay-card"></div>{% endif %}
                  {% capture media_class %}media--hover-effect overflow-hidden media--{{ section.settings.image_ratio | default: "adapt" }}{% endcapture %}
                    {% render 'media' with class: media_class, size: "half", media: image , ratio: section.settings.image_ratio %}
                </div>

                <div class="card__text card__text-spacing card-colored card__text-hover{% if section.settings.image_padding == false %} color-{{ section.settings.box_color_scheme }}{% endif %}">
                  {% unless section.settings.image_padding %}<div class="overlay-card"></div>{% endunless %}
                  <h3 class="{{ section.settings.box_font_style | default: 'heading' }}">
                    {%- if block.settings.collection.title != blank -%}
                      {{- block.settings.collection.title | escape -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>
                    {%- else -%}
                      {{ 'onboarding.collection_title' | t }}
                    {%- endif -%}
                  </h3>
                </div>
              {%- else -%}
                {% comment %} No image {% endcomment %}
                <div class="overlay-card"></div>
                <div class="card__text-spacing card__text-hover">
                  <h3 class="{% unless section.settings.box_font_style == 'heading' %}h1 {% else %}h2 {%endunless %}{{ section.settings.box_font_style | default: 'heading' }}">
                    {%- if block.settings.collection.title != blank -%}
                      {{- block.settings.collection.title | escape -}}{%- if block.settings.collection.description == blank -%}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>{% endif %}
                    {%- else -%}
                      {{ 'onboarding.collection_title' | t }}
                    {%- endif -%}
                  </h3>

                  {%- if block.settings.collection.description != blank -%}
                    <p class="card__caption">
                      {{- block.settings.collection.description | strip_html | truncatewords: 12 -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>
                    </p>
                  {%- endif -%}
                </div>
              {%- endif -%}
            </div>
          </a>
        </li>
      {%- endfor -%}
    </ul>

    {%- if section.settings.swipe_on_mobile -%}
      <div class="slider-buttons no-js-hidden{% if section.blocks.size < 5 %} medium-hide{% endif %}{% if section.blocks.size < 2 %} small-hide{% endif %}">
        <div class="slider-counter caption">
          <span class="slider-counter--current">1</span>
            <span aria-hidden="true"> / </span>
            <span class="visually-hidden">{{ 'accessibility.of' | t }}</span>
          <span class="slider-counter--total">{{ section.blocks.size }}</span>
        </div>
        <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="{{ 'accessibility.previous_slide' | t }}">{% render 'icon-caret' %}</button>
        <button type="button" class="slider-button slider-button--next" name="next" aria-label="{{ 'accessibility.next_slide' | t }}">{% render 'icon-caret' %}</button>
      </div>
    {%- endif -%}
  </slider-component>

  {% comment %} {%- if section.settings.show_view_all and section.blocks.size < collections.size -%}
    <div class="center{% if section.settings.swipe_on_mobile %} small-hide medium-hide{% endif %}">
      <a href="{{ routes.collections_url }}" class="button">{{ 'sections.collection_list.view_all' | t }}</a>
    </div>
  {%- endif -%} {% endcomment %}
</div>