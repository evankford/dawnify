{%- comment -%}EKF Modded - section style + reveal{%- endcomment -%}

{{ 'component-image-with-text.css' | asset_url | stylesheet_tag }}
{% if section.settings.id == blank %}
{% assign inner_id = "rt" | append : section.id %}
{% else %}
{% assign inner_id = section.settings.id %}
{% endif %}

{% render 'section-style' with id: section.id, params: section.settings %}

<div id="{{ inner_id }}" class="image-with-text {% if section.settings.sticky_image == true %} sticky-image {% endif %} {% if section.settings.full_width %}image-with-text--full-width{% else %}page-width{% endif %}">
  <div class="image-with-text__grid {% if section.settings.layout == 'text_first' %} image-with-text__grid--reverse{% endif %} grid grid--gapless grid--1-col grid--2-col-tablet">
    <div class="grid__item grid__item__image" data-reveal >
    {%- capture media_classes -%}image-with-text__media image-with-text__media--{{ section.settings.height }} {% if section.settings.image == blank %}image-with-text__media--placeholder placeholder{% endif %}{%- endcapture -%}
      {% render 'media' with image: section.settings.image, size: "half" %}
    </div>
    <div class="grid__item">
      <div class="image-with-text__content image-with-text__content--{{ section.settings.height }}">
        {%- for block in section.blocks -%}
          {% case block.type %}
            {%- when 'heading' -%}
              <h2 data-reveal class="heading {% if block.settings.heading_size == 'small' %}h2{% elsif block.settings.heading_size == 'large'%} h0 {% else %} h1{% endif %}" {{ block.shopify_attributes }}>{{ block.settings.heading | escape }}</h2>
            {%- when 'text' -%}
              <div data-reveal class="image-with-text__text rte" {{ block.shopify_attributes }}>{{ block.settings.text }}</div>
            {%- when 'label' -%}
              <div  data-reveal class="label {% if block.settings.heading_size == 'small' %}h5{% elsif block.settings.heading_size == 'medium' %}h4 {% else %}h3{% endif %}" {{ block.shopify_attributes }}>{{ block.settings.heading | escape }}</div>
            {%- when 'button' -%}
              {%- if block.settings.button_label != blank -%}
                <a{% if block.settings.button_link == blank %} data-reveal role="link" aria-disabled="true"{% else %} href="{{ block.settings.button_link }}"{% endif %} class="button{% if block.settings.button_style_secondary %} button--secondary{% else %} button--primary{% endif %}"{% if block.settings.button_link == blank %} aria-disabled="true"{% endif %} {{ block.shopify_attributes }}>
                  {{ block.settings.button_label | escape }}
                </a>
              {%- endif -%}
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>